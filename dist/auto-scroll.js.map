{"version":3,"sources":["webpack://AutoScroll/webpack/universalModuleDefinition","webpack://AutoScroll/webpack/bootstrap","webpack://AutoScroll/./node_modules/@babel/runtime/helpers/classCallCheck.js","webpack://AutoScroll/./node_modules/@babel/runtime/helpers/createClass.js","webpack://AutoScroll/./src/util.js","webpack://AutoScroll/./src/index.js"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","instance","Constructor","TypeError","_defineProperties","target","props","length","descriptor","configurable","writable","protoProps","staticProps","obj","requestAnimationFrame","msRequestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","func","setTimeout","isDomLevel2","addEventListener","el","handler","opt","attachEvent","removeEventListener","detachEvent","AutoScroll","dom","options","console","log","this","_init","config","fps","step","remote","remoteMethod","remoteCondition","hoverStop","copyScrollContent","wheel","suspend","suspendItem","suspendItemEqual","suspendTime","suspendStep","container","document","querySelector","children","style","overflow","now","lastSuspendTime","last","Date","interval","delta","raf","stop","isRequesting","isCopied","isSuspend","suspendScrollTop","suspendItemIndex","firstChild","item","suspendItemHeight","offsetHeight","_stopScroll","_resumeScroll","_doWheel","scrollHeight","clientHeight","_copyScrollContent","_startScroll","_initHoverEvent","_initWheelEvent","stopScroll","resumeScroll","doWheel","result","toString","slice","innerHTML","scrollTop","_updateSuspendItemInfo","_reset","_scroll","_doRemote","_remoteMethod","_finishRequest","walkDistance","evt","currentTarget","isScrollDown","wheelDelta","wheelDistance","height","realHeight","viewHeight","isBegin","isEnd","walkOnCopy","cancelAnimationFrame"],"mappings":"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","file":"auto-scroll.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"AutoScroll\"] = factory();\n\telse\n\t\troot[\"AutoScroll\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;","export function getPrototype(obj) {\n  return Object.prototype.toString.call(obj).slice(8, -1);\n}\n\nexport function hasOwnProperty(obj, key) {\n  return Object.prototype.hasOwnProperty.call(obj, key);\n}\n\n// https://github.com/ecomfe/zrender/blob/master/src/animation/requestAnimationFrame.js\nexport const requestAnimationFrame =\n  (typeof window !== \"undefined\" &&\n    ((window.requestAnimationFrame &&\n      window.requestAnimationFrame.bind(window)) ||\n      // https://github.com/ecomfe/zrender/issues/189#issuecomment-224919809\n      (window.msRequestAnimationFrame &&\n        window.msRequestAnimationFrame.bind(window)) ||\n      window.mozRequestAnimationFrame ||\n      window.webkitRequestAnimationFrame)) ||\n  function (func) {\n    // 60 fps\n    setTimeout(func, 16);\n  };\n\n// https://github.com/ecomfe/zrender/blob/master/src/core/event.js\nconst isDomLevel2 = typeof window !== \"undefined\" && !!window.addEventListener;\nexport function addEventListener(el, name, handler, opt) {\n  if (isDomLevel2) {\n    el.addEventListener(name, handler, opt);\n  } else {\n    el.attachEvent(\"on\" + name, handler);\n  }\n}\nexport function removeEventListener(el, name, handler, opt) {\n  if (isDomLevel2) {\n    el.removeEventListener(name, handler, opt);\n  } else {\n    el.detachEvent(\"on\" + name, handler);\n  }\n}\n","import {\n  getPrototype,\n  hasOwnProperty,\n  requestAnimationFrame,\n  addEventListener,\n  removeEventListener,\n} from \"./util\";\nimport { log, error } from \"./logger\";\n\nclass AutoScroll {\n  constructor(dom, options) {\n    console.log('hello');\n    this._init(dom, options);\n  }\n\n  _init(dom, options) {\n    // 默认参数\n    this.config = {\n      fps: 60, // 帧率\n      step: 1, // 一次前进多少.单位：px\n      remote: false, // 若设为true，表明开始滚动后数据会发生变化，用户需手动停止改状态.用于数据量大循环请求的场景\n      remoteMethod: null,\n      remoteCondition: null,\n      hoverStop: false,\n      copyScrollContent: null,\n      wheel: false, // 支持滚轮滚动\n      suspend: false,\n      suspendItem: true, // 表示滚动一个儿子的高度暂停，默认为true\n      suspendItemEqual: false, // 若儿子高度均相等，可开启该属性减少查询dom（应该能提高性能吧，俺也不知道诶）\n      suspendTime: 2000, // 单位（ms）\n      suspendStep: 40, // 表示滚动多少距离后暂停（仅当suspendItem为false有效）\n    };\n\n    // 初始化参数\n    if (options instanceof Object) {\n      for (let key in options) {\n        hasOwnProperty(this.config, key) && (this.config[key] = options[key]);\n      }\n    }\n\n    // 容器\n    this.container =\n      typeof dom === \"string\" ? document.querySelector(dom) : dom;\n    if (!this.container) {\n      return error(\"dom节点不存在\");\n    }\n\n    // 子元素列表（是元素element，不包括非element的text、comment节点[node]）\n    this.children = this.container.children;\n\n    // 隐藏滚动轴\n    this.container.style.overflow = \"hidden\";\n    this.now = null;\n    this.lastSuspendTime = this.last = Date.now();\n    this.interval = 1000 / this.config.fps;\n    this.delta = null;\n    this.raf = null;\n    this.stop = false;\n    this.isRequesting = false;\n    this.isCopied = false; // 表示是否复制\n    this.isSuspend = false;\n    this.suspendScrollTop = 0;\n    this.suspendItemIndex = 0;\n    const firstChild = this.children.item(0);\n    this.suspendItemHeight = firstChild ? firstChild.offsetHeight : 0;\n    this._stopScroll = null; // mousenter事件用\n    this._resumeScroll = null; // mousenter事件用\n    this._doWheel = null; // mousewheel事件用\n\n    // 判断是否要滚动\n    const needScroll =\n      this.container.scrollHeight > this.container.clientHeight;\n    if (needScroll) {\n      // 拷贝一份滚动内容，为了实现元素循环滚动的假象\n      // 如果开启了'数据变化'，便不再复制数据，并且需自己保障每次滚动的数据足够多，不然滚动到底，在新的数据到来时会出现停顿\n      !this.config.remote && this._copyScrollContent();\n      // 开始滚动\n      this._startScroll();\n      // 悬浮停止\n      this._initHoverEvent();\n      // 支持滚轮滚动\n      this._initWheelEvent();\n    }\n  }\n\n  _initHoverEvent() {\n    if (this.config.hoverStop) {\n      this._stopScroll = this.stopScroll.bind(this);\n      this._resumeScroll = this.resumeScroll.bind(this);\n      addEventListener(this.container, \"mouseenter\", this._stopScroll);\n      addEventListener(this.container, \"mouseleave\", this._resumeScroll);\n    }\n  }\n\n  _initWheelEvent() {\n    if (this.config.wheel) {\n      this._doWheel = this.doWheel.bind(this);\n      addEventListener(this.container, \"mousewheel\", this._doWheel);\n    }\n  }\n\n  _copyScrollContent() {\n    // 表示是否复制过\n    this.isCopied = true;\n    const result =\n      this.config.copyScrollContent && this.config.copyScrollContent();\n    // return false表明不执行之后的复制动作\n    if (getPrototype(result) === \"Boolean\" && !result) return;\n    this.container.innerHTML =\n      this.container.innerHTML + this.container.innerHTML;\n  }\n\n  _startScroll() {\n    this.raf = requestAnimationFrame(this._startScroll.bind(this));\n    // 场景：悬浮停止\n    if (this.stop) {\n      return;\n    }\n\n    // 更新时间\n    this.now = Date.now();\n    this.delta = this.now - this.last;\n\n    // 场景：暂停\n    if (this.isSuspend) {\n      // 判断暂停时间是否结束\n      if (this.now - this.lastSuspendTime < this.config.suspendTime) {\n        return;\n      }\n    }\n\n    let scrollHeight = this.container.scrollHeight,\n      scrollTop = this.container.scrollTop,\n      clientHeight = this.container.clientHeight;\n\n    if (this.config.suspend) {\n      let whetherToSuspend = false;\n      // 判断是否到暂停距离\n      if (this.config.suspendItem) {\n        whetherToSuspend =\n          scrollTop - this.suspendScrollTop >= this.suspendItemHeight;\n      } else {\n        whetherToSuspend =\n          scrollTop - this.suspendScrollTop >= this.config.suspendStep;\n      }\n      if (whetherToSuspend) {\n        // 输出的距离永远等于suspendStep\n        log(\"距离\", scrollTop - this.suspendScrollTop);\n        log(\n          this.suspendItemIndex,\n          this.suspendItemHeight,\n          this.children.item(this.suspendItemIndex).innerHTML\n        );\n        this.suspendScrollTop = scrollTop;\n        this.isSuspend = true;\n        this.lastSuspendTime = this.now;\n        this._updateSuspendItemInfo();\n        return;\n      }\n    }\n\n    // 判断是否滚动到底\n    const isEnd = scrollHeight - scrollTop === clientHeight;\n    if (isEnd) {\n      // 到底重置.注意，不是重置为0哦\n      this._reset();\n      // return cancelAnimationFrame(raf)\n    }\n\n    if (this.delta >= this.interval) {\n      // this.last = this.now\n      this.last = this.now - (this.delta % this.interval);\n      this._scroll();\n      // remote相关操作\n      this._doRemote();\n    }\n  }\n\n  _updateSuspendItemInfo() {\n    if (this.config.suspendItem) {\n      this.suspendItemIndex++;\n      // 循环重置\n      /**\n       * 执行_copyScrollContent方法后，suspendItemIndex会大于实际儿子长度，但因为指向的元素是实际元素拷贝出来的，所以也无所谓\n       * 如果想重置到真实的下标，也可以在执行_copyScrollContent方法后，suspendItemIndex -= this.children.length/2[真实儿子长度]\n       */\n      this.suspendItemIndex >= this.children.length &&\n        (this.suspendItemIndex = 0);\n      // 开启suspendItemEqual表示儿子高度均等，只需以第一个儿子高度为准，无需重新获取\n      this.config.suspendItemEqual ||\n        (this.suspendItemHeight = this.children.item(\n          this.suspendItemIndex\n        ).offsetHeight);\n    }\n  }\n\n  _doRemote() {\n    // 执行远程请求，isRequesting保证上一次请求结束才能再发\n    this.config.remote && !this.isRequesting && this._remoteMethod();\n  }\n\n  _remoteMethod() {\n    // 判断是否需要发请求\n    // 不知道会不会造成reflow啊...\n    // 默认条件：若滚动轴过1/4，触发请求\n    let isNeedRequest = this.config.remoteCondition\n      ? this.config.remoteCondition()\n      : this.container.scrollTop >= this.container.scrollHeight / 4;\n    if (isNeedRequest) {\n      this.isRequesting = true;\n      this.config.remoteMethod(this, this._finishRequest.bind(this));\n    }\n  }\n\n  _finishRequest() {\n    this.isRequesting = false;\n  }\n\n  _reset() {\n    log(\"reset\");\n    // 自从上次暂停结束后滚动的距离\n    let walkDistance = this.container.scrollTop - this.suspendScrollTop;\n    if (this.config.remote) {\n      this.container.scrollTop =\n        this.container.scrollHeight - this.container.clientHeight;\n    } else {\n      this.container.scrollTop =\n        this.container.scrollHeight / 2 - this.container.clientHeight;\n    }\n    // 因为无缝滚动，所以scrollTop变完后的距离减掉walkDistance就可以推出现在的suspendScrollTop\n    this.suspendScrollTop = this.container.scrollTop - walkDistance;\n  }\n\n  _scroll() {\n    this.container.scrollTop += this.config.step;\n  }\n\n  getContainer() {\n    return this.container;\n  }\n\n  stopScroll() {\n    this.stop = true;\n  }\n\n  resumeScroll() {\n    this.stop = false;\n  }\n\n  doWheel(evt) {\n    // 当前滚动距离\n    let scrollTop = evt.currentTarget.scrollTop;\n\n    // firefox 70.0.1，一次滚动的距离实际上是54，用的DOMMouseScroll测的\n    // chrome 78.0.3904.87，一次滚动的距离实际上是53，用的是mousewheel\n    // IE没测\n    // onwheel还没测\n    // 不同浏览器判断条件不一样，以后要优化hzm_to_do\n    let isScrollDown = evt.wheelDelta < 0;\n    let wheelDistance = isScrollDown ? 53 : -53;\n    // 判断是否到真实的底\n    let height = this.container.scrollHeight; // 容器展开高度\n    let realHeight = this.isCopied ? height / 2 : height; // 容器展开实际高度\n    let viewHeight = this.container.offsetHeight; // 可视窗口高度\n    let isBegin = false;\n    let isEnd = false;\n    let walkOnCopy = false; // 是否滚动至复制部分了\n    // 若未复制，说明还在无限滚动，将继续发请求\n    if (this.isCopied) {\n      // 向下滚动\n      if (isScrollDown) {\n        // 滚动至复制部分\n        if (scrollTop + viewHeight > realHeight) {\n          // 其实滚动至复制部分就没有判断到底的必要了，因为scrollTop超出实际部分没有意义，而且也无法赋值，写完才发现，写了就写了吧\n          isEnd = scrollTop + wheelDistance + viewHeight > height;\n          walkOnCopy = true;\n        } else {\n          // 尚未滚动至复制部分\n          isEnd = scrollTop + wheelDistance + viewHeight > realHeight;\n        }\n        if (isEnd) {\n          return (evt.currentTarget.scrollTop = walkOnCopy\n            ? height - viewHeight\n            : realHeight - viewHeight);\n        }\n      } else {\n        // 向上滚动\n        // 判断当前是否完全看不到原始部分\n        if (scrollTop >= realHeight) {\n          // 表示到顶了\n          scrollTop + wheelDistance < realHeight && (isBegin = true);\n          if (isBegin) {\n            return (evt.currentTarget.scrollTop = realHeight);\n          }\n        }\n      }\n    }\n    evt.currentTarget.scrollTop += wheelDistance;\n    // remote相关操作\n    this._doRemote();\n  }\n\n  getRemote() {\n    return this.config.remote;\n  }\n\n  toggleRemote() {\n    this.config.remote = !this.config.remote;\n    this.config.remote || this._copyScrollContent();\n  }\n\n  destroy() {\n    // 销毁相应事件及raf\n    if (this.container) {\n      removeEventListener(this.container, \"mouseenter\", this._stopScroll);\n      removeEventListener(this.container, \"mouseleave\", this._resumeScroll);\n      removeEventListener(this.container, \"mousewheel\", this._doWheel);\n    }\n    cancelAnimationFrame(this.raf);\n  }\n}\n\nexport default AutoScroll;\n"],"sourceRoot":""}