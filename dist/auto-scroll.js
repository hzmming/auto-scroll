/*!
 * AutoScroll.js v1.5.0
 * (c) 2019-2020 LoryHuang
 * Released under the MIT License.
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.AutoScroll=t():e.AutoScroll=t()}(window,(function(){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=2)}([function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function i(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.exports=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}},function(e,t,i){"use strict";i.r(t);var n=i(0),o=i.n(n),s=i(1),r=i.n(s);function l(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var h="undefined"!=typeof window&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(e){setTimeout(e,16)},c="undefined"!=typeof window&&!!window.addEventListener;function u(e,t,i,n){c?e.addEventListener(t,i,n):e.attachEvent("on"+t,i)}function a(e,t,i,n){c?e.removeEventListener(t,i,n):e.detachEvent("on"+t,i)}var d=function(){function e(t,i){o()(this,e),this._init(t,i)}return r()(e,[{key:"_init",value:function(e,t){if(this.config={fps:60,step:1,remote:!1,remoteMethod:null,remoteCondition:null,hoverStop:!1,copyScrollContent:null,wheel:!1,suspend:!1,suspendItem:!0,suspendItemEqual:!1,suspendTime:2e3,suspendStep:40},t instanceof Object)for(var i in t)l(this.config,i)&&(this.config[i]=t[i]);if(this.container="string"==typeof e?document.querySelector(e):e,!this.container)return console.error("dom节点不存在");this.children=this.container.children,this.container.style.overflow="hidden",this.now=null,this.lastSuspendTime=this.last=Date.now(),this.interval=1e3/this.config.fps,this.delta=null,this.raf=null,this.stop=!1,this.isRequesting=!1,this.isCopied=!1,this.isSuspend=!1,this.suspendScrollTop=0,this.suspendItemIndex=0;var n=this.children.item(0);this.suspendItemHeight=n?n.offsetHeight:0,this._stopScroll=null,this._resumeScroll=null,this._doWheel=null,this.container.scrollHeight>this.container.clientHeight&&(!this.config.remote&&this._copyScrollContent(),this._startScroll(),this._initHoverEvent(),this._initWheelEvent())}},{key:"_initHoverEvent",value:function(){(this.config.hoverStop||this.config.wheel)&&(this._stopScroll=this.stopScroll.bind(this),this._resumeScroll=this.resumeScroll.bind(this),u(this.container,"mouseenter",this._stopScroll),u(this.container,"mouseleave",this._resumeScroll))}},{key:"_initWheelEvent",value:function(){this.config.wheel&&(this._doWheel=this.doWheel.bind(this),u(this.container,"mousewheel",this._doWheel))}},{key:"_copyScrollContent",value:function(){this.isCopied=!0;var e,t=this.config.copyScrollContent&&this.config.copyScrollContent();("Boolean"!==(e=t,Object.prototype.toString.call(e).slice(8,-1))||t)&&(this.container.innerHTML=this.container.innerHTML+this.container.innerHTML)}},{key:"_startScroll",value:function(){if(this.raf=h(this._startScroll.bind(this)),!(this.stop||(this.now=Date.now(),this.delta=this.now-this.last,this.isSuspend&&this.now-this.lastSuspendTime<this.config.suspendTime))){var e=this.container.scrollHeight,t=this.container.scrollTop,i=this.container.clientHeight;if(this.config.suspend){if(this.config.suspendItem?t-this.suspendScrollTop>=this.suspendItemHeight:t-this.suspendScrollTop>=this.config.suspendStep)return this.suspendScrollTop,this.suspendItemIndex,this.suspendItemHeight,this.children.item(this.suspendItemIndex).innerHTML,this.suspendScrollTop=t,this.isSuspend=!0,this.lastSuspendTime=this.now,void this._updateSuspendItemInfo()}e-t===i&&this._reset(),this.delta>=this.interval&&(this.last=this.now-this.delta%this.interval,this._scroll(),this._doRemote())}}},{key:"_updateSuspendItemInfo",value:function(){this.config.suspendItem&&(this.suspendItemIndex++,this.suspendItemIndex>=this.children.length&&(this.suspendItemIndex=0),this.config.suspendItemEqual||(this.suspendItemHeight=this.children.item(this.suspendItemIndex).offsetHeight))}},{key:"_doRemote",value:function(){this.config.remote&&!this.isRequesting&&this._remoteMethod()}},{key:"_remoteMethod",value:function(){(this.config.remoteCondition?this.config.remoteCondition():this.container.scrollTop>=this.container.scrollHeight/4)&&(this.isRequesting=!0,this.config.remoteMethod(this,this._finishRequest.bind(this)))}},{key:"_finishRequest",value:function(){this.isRequesting=!1}},{key:"_reset",value:function(){var e=this.container.scrollTop-this.suspendScrollTop;this.config.remote?this.container.scrollTop=this.container.scrollHeight-this.container.clientHeight:this.container.scrollTop=this.container.scrollHeight/2-this.container.clientHeight,this.suspendScrollTop=this.container.scrollTop-e}},{key:"_scroll",value:function(){this.container.scrollTop+=this.config.step}},{key:"getContainer",value:function(){return this.container}},{key:"stopScroll",value:function(){this.stop=!0}},{key:"resumeScroll",value:function(){this.stop=!1}},{key:"doWheel",value:function(e){var t=e.currentTarget.scrollTop,i=e.wheelDelta<0,n=i?53:-53,o=this.container.scrollHeight,s=this.isCopied?o/2:o,r=this.container.offsetHeight,l=!1,h=!1,c=!1;if(this.isCopied)if(i){if(t+r>s?(h=t+n+r>o,c=!0):h=t+n+r>s,h)return e.currentTarget.scrollTop=c?o-r:s-r}else if(t>=s&&(t+n<s&&(l=!0),l))return e.currentTarget.scrollTop=s;e.currentTarget.scrollTop+=n,this._doRemote()}},{key:"isRemote",value:function(){return this.config.remote}},{key:"stopRemote",value:function(){this.config.remote=!1,this._copyScrollContent()}},{key:"destroy",value:function(){this.container&&(a(this.container,"mouseenter",this._stopScroll),a(this.container,"mouseleave",this._resumeScroll),a(this.container,"mousewheel",this._doWheel)),cancelAnimationFrame(this.raf)}}]),e}();t.default=d}]).default}));